"use strict";let itemsToShow=12,totalItems=0;function drawSlider(){const e={items:1,slideBy:"page",controls:!0,speed:1e3,autoplayButtonOutput:!1,arrowKeys:!0,autoplay:!0,mode:"gallery"};if(document.querySelector(".promo_slider")){tns({container:".promo_slider",controlsContainer:".promo_slider-controls",...e})}if(document.querySelector(".location_slider")){tns({container:".location_slider",controlsContainer:".location_slider-controls",...e})}if(document.querySelector(".single_slider")){tns({container:".single_slider",navContainer:".single_slider-thumbnails",navAsThumbnails:!0,controlsContainer:".single_slider-controls",...e,autoplay:!1})}}function showMore(){itemsToShow+=totalItems-itemsToShow,console.log(itemsToShow,totalItems),drawCatalog()}async function drawCatalog(){let e=await fetch("data/data.json");if(e.ok){let t,o,s,a,n,i=await e.json(),l="";totalItems=i.products.length;let r="products_list-item",c=r+" wow fadeInUp";const d=document.querySelector(".products_list"),u=document.querySelector(".catalog_list");if(null!=d){d.classList.contains("catalog_list")&&(itemsToShow=totalItems);for(let e=0;e<itemsToShow;e++)t=i.products[e].img,o=i.products[e].itemname,s=i.products[e].price,a=i.products[e].category,n=i.products[e].color,e>itemsToShow&&(r=c),l+=drawProdHTML(r,t,o,s,a,n);if(d.innerHTML=l+'<li aria-hidden="true" class="hidden"></li>',d.classList.contains("collection_list")&&checkDisplay(),u){mixitup(".catalog_list",{animation:{effects:""}})}}}else console.log("HTTP Error: "+e.status)}function drawProdHTML(e,t,o,s,a,n){return`\n        <li class="${e} mix ${a} ${n} col-12 col-sm-6 col-md-4 col-lg-3" data-price="${s}">\n            <picture>\n                <source type="image/webp" srcset="img/products/${t}.webp">\n                <source type="image/jpeg" srcset="img/products/${t}.jpg">\n                <img class="${e}_img" src="img/products/${t}.jpg" alt="${o}">\n            </picture>\n            <div class="${e}_info">\n                <span class="name">${o}</span>\n                <span class="price">$${s}</span>\n            </div>\n            <div class="${e}_action d-flex">\n                <a href="javasript:void(0)" class="btn-add action-btn" data-price="${s}">Buy</a>\n                <a href="product.html" class="btn-info action-btn" data-id="${o}">Details</a>\n            </div>\n        </li>\n    `}function checkDisplay(){itemsToShow==totalItems&&showBtn.classList.add("hidden")}async function drawMap(){let e=L.map("map",{scrollWheelZoom:!1,fullscreenControl:!0,fullscreenControlOptions:{position:"topleft"}}).setView([57.729535,-106.420245],2);L.tileLayer=L.tileLayer.colorFilter("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"",filter:["grayscale:90%","contrast:70%","brightness:110%"]}).addTo(e),e.dispMap=function(){e.plotMap(),e.map.invalidateSize()},L.control.locate({strings:{title:"Your location"},icon:"icon-map-marker"}).addTo(e);let t=L.markerClusterGroup({removeOutsideVisibleBounds:!0,disableClusteringAtZoom:16}),o=await fetch("data/data.json");if(o.ok){let s=await o.json();for(let e=0;e<s.stores.length;e++){let o=`<div class="popup_general">\n                            <p class="popup_general-city">${s.stores[e].city}</p>\n                            <p class="popup_general-address">${s.stores[e].address}</p>\n                            <p class="popup_general-location">${s.stores[e].location}</p>\n                        </div>\n                        <div class="popup_additional">\n                            <p class="popup_additional-hours">${s.stores[e].ophours}</p>\n                    `;null!=s.stores[e].phone&&(o+=`<a href="tel:${s.stores[e].phone}" class="popup_additional-phone"><i class="icon-phone"></i>${s.stores[e].phone}</a>`),null!=s.stores[e].web&&(o+=`<a href="${s.stores[e].web}" target="_blank" class="popup_additional-site"><i class="icon-web"></i>Website</a>`),t.addLayer(L.marker([s.stores[e].lat,s.stores[e].lng]).bindPopup(o))}e.addLayer(t)}else console.log("HTTP Error: "+o.status)}function drawNavbar(){const e=document.querySelector(".navbar"),t=e.offsetTop,o=document.querySelector(".hamburger--minus"),s=document.querySelector(".navbar_submenu");o.addEventListener("click",()=>{o.classList.toggle("is-active"),s.classList.toggle("is-active-nav"),e.classList.add("sticky")}),window.addEventListener("scroll",()=>{window.pageYOffset>t?e.classList.add("sticky"):s.classList.contains("is-active-nav")||e.classList.remove("sticky")})}function scrollNav(){const e=document.querySelector(".scroll_top"),t=document.querySelector(".scroll_bottom");e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{window.pageYOffset>0&&t.classList.add("active"),window.pageYOffset>300?e.classList.add("active"):e.classList.remove("active")})}function userLogin(){let e="animated fade";const t={title:"Log in",customClass:{title:"popup_login-title",popup:"popup_login"},showConfirmButton:!1,showCloseButton:!1,confirmButtonText:"Submit",showClass:{popup:e+"In",backdrop:e+"In swal2-backdrop-show"},hideClass:{popup:e+"Out",backdrop:e+"Out swal2-backdrop-show"},html:'\n                <form method="POST" id="popup_login-form" class="popup_login-form">\n                    <input id="popup_login-form_email" type="email" class="popup_login-form_email" placeholder="Email">\n                    <input id="popup_login-form_password" type="password" class="popup_login-form_password" placeholder="Password">\n                    <p class="popup_login-form_error">Your email/password is incorrect. Check your data and try again.</p>\n                    <div class="popup_login-form_field">\n                        <input id="remember" type="checkbox" name="remember" checked>\n                        <label for="remember">Keep me logged in</label>\n                    </div>\n                    <button class="popup_login-form_submit">Submit</button>\n                </form>\n                <a class="password_reminder" href="javascript:void(0)">Forgot your password?</a>\n                '};document.body.addEventListener("click",e=>{e.target.matches(".popup_login-form_submit")&&(e.preventDefault(),sendLoginRequest()),e.target.matches(".triggerLoginModal")&&Swal.fire(t)})}function sendLoginRequest(){const e=document.getElementById("popup_login-form_email"),t=document.getElementById("popup_login-form_password"),o=document.getElementById("remember"),s=document.querySelector(".popup_login-form_error");new Promise((s,a)=>{s({email:e.value,password:t.value,checkbox:o})}).then((async function(e){let t=await fetch("data/data.json");if(t.ok){let o=await t.json();for(let t=0;t<o.users.length;t++){let a=o.users[t].email,n=o.users[t].password;if(a===e.email&&n===e.password){"customer"===o.users[t].access?e.checkbox.checked?localStorage.setItem("auth","user"):sessionStorage.setItem("auth","user"):"admin"===o.users[t].access&&(e.checkbox.checked?localStorage.setItem("auth","admin"):sessionStorage.setItem("auth","admin")),s.style.display="none",Swal.close(),changeElemsOnAuth();break}a===e.email&&n===e.password||(s.style.display="block")}}}))}function changeElemsOnAuth(){const e=document.querySelector(".navbar_user-account"),t=localStorage.getItem("auth")||sessionStorage.getItem("auth");e.innerHTML="admin"===t?'\n        <a href="admin.html">Orders</a> / \n        <a class="logout" href="javascript:void(0)">Logout</a>':"user"===t?'\n        <a href="profile.html">My Account</a> /\n        <a class="logout" href="javascript:void(0)">Logout</a>\n        ':'\n                <a class="triggerLoginModal" id="loginlink" href="javascript:void(0)">Login</a> /\n                <a id="joinlink" href="join.html">Join</a>\n                '}function triggerSecondForm(){const e=document.getElementById("isDifferent"),t=document.querySelectorAll(".checkout_form-fieldset--optional input"),o=document.querySelector(".btn-full-submit");o.setAttribute("disabled","disabled"),t.forEach(e=>{e.setAttribute("disabled","disabled")}),e.addEventListener("change",()=>{e.checked?(t.forEach(e=>{e.removeAttribute("disabled")}),o.removeAttribute("disabled")):(t.forEach(e=>{e.setAttribute("disabled","disabled")}),o.setAttribute("disabled","disabled"))})}function drawTabs(){const e=document.querySelector(".single_tabs-wrapper"),t=document.querySelectorAll(".tab-button"),o=document.querySelectorAll(".content");e.onclick=e=>{const s=e.target.dataset.id;if(s){t.forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active"),o.forEach(e=>{e.classList.remove("active")});document.getElementById(s).classList.add("active")}}}document.body.addEventListener("click",e=>{e.target.matches(".collection-btn")&&(showMore(),e.target.classList.add("hidden"))}),document.addEventListener("DOMContentLoaded",()=>{changeElemsOnAuth();new LazyLoad({});customSelect("select"),userLogin(),drawNavbar(),drawSlider(),scrollNav(),(new WOW).init(),baguetteBox.run(".gallery_lookbook",{}),drawCatalog();const e=document.querySelector(".blog_posts");null!=e&&drawPosts(e);null!=document.querySelector(".post_main")&&drawSingle();null!=document.getElementById("map")&&drawMap();null!=document.querySelector(".checkout")&&triggerSecondForm();null!=document.querySelector(".single_tabs")&&drawTabs()}),document.body.addEventListener("click",e=>{e.target.matches(".logout")&&(localStorage.removeItem("auth")||sessionStorage.removeItem("auth"),changeElemsOnAuth())});let postID=0;function setID(e){postID=e,localStorage.setItem("id",postID),drawPosts()}async function drawPosts(e){let t=await fetch("data/data.json");if(t.ok){let o=await t.json(),s="";for(let e=0;e<o.posts.length;e++){let t=o.posts[e].img,a=o.posts[e].title,n=o.posts[e].id,i=o.posts[e].category,l=o.posts[e].author,r=o.posts[e].date;s+=drawHTML(t,a,!0,n,i),n==localStorage.getItem("id")&&setData(n,t,a,l,r)}e.innerHTML=s;mixitup(e,{animation:{effects:""}})}else console.log("HTTP Error: "+t.status)}function drawHTML(e,t,o,s,a){return"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam aliquid provident\n    quas optio dolor quaerat.",`\n    <li class="animated fadeInUp blog_posts-post mix ${a} col-12 col-sm-6 col-lg-4 col-xl-3">\n        <div class="blog_posts-post_img">\n            <picture>\n                <source type="image/webp" srcset="img/blog/${e}.webp">\n                <source type="image/jpeg" srcset="img/blog/${e}.jpg">\n                <img src="img/blog/${e}.jpg" alt="post">\n            </picture>\n        </div>\n        <div class="blog_posts-post_text">\n            <h3 class="title">${t}</h3>\n            <p class="preview">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam aliquid provident\n    quas optio dolor quaerat.</p>\n            <a href="post.html" class="read" target="_blank" onclick="setID(${s})">Read more</a>\n        </div>\n    </li>\n`}function setData(e,t,o,s,a){if(localStorage.getItem("id")){let e={img:t,title:o,author:s,date:a};localStorage.setItem("data",JSON.stringify(e))}}function drawSingle(){let e=JSON.parse(localStorage.getItem("data")),t=`url(img/blog/${e.img}-lg.jpg)`,o=e.title,s=e.author,a=e.date,n=parseInt(1e4*Math.random());document.querySelector(".post_header").style.backgroundImage=t,document.querySelector(".post_info-title").innerText=o,document.getElementById("views").innerText=n,document.getElementById("author").innerText=s,document.getElementById("date").innerText=a}
//# sourceMappingURL=../sourcemaps/main.min.js.map
