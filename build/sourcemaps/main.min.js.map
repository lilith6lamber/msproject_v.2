{"version":3,"sources":["01_main.js"],"names":["itemsToShow","totalItems","drawSlider","sliderDefaults","items","slideBy","controls","speed","autoplayButtonOutput","arrowKeys","autoplay","mode","document","querySelector","tns","container","controlsContainer","navContainer","navAsThumbnails","showMore","console","log","drawCatalog","async","response","fetch","ok","img","item","price","category","color","json","html","products","length","liclass","newclass","catalogEl","fullCatalogEl","classList","contains","i","itemname","drawProdHTML","innerHTML","checkDisplay","mixitup","animation","effects","status","li","showBtn","add","drawMap","map","L","scrollWheelZoom","fullscreenControl","fullscreenControlOptions","position","setView","tileLayer","colorFilter","attribution","filter","addTo","dispMap","plotMap","invalidateSize","control","locate","strings","title","icon","markers","markerClusterGroup","removeOutsideVisibleBounds","disableClusteringAtZoom","stores","popupData","city","address","location","ophours","phone","web","addLayer","marker","lat","lng","bindPopup","drawNavbar","nav","navOffset","offsetTop","trigger","submenu","addEventListener","toggle","window","pageYOffset","remove","scrollNav","scrollTopBtn","scrollBottomBtn","scrollTo","top","behavior","userLogin","animate","swalConfig","customClass","popup","showConfirmButton","showCloseButton","confirmButtonText","showClass","backdrop","hideClass","body","e","target","matches","preventDefault","sendLoginRequest","Swal","fire","emailInput","getElementById","passwordInput","checkbox","validationErr","Promise","resolve","reject","email","value","password","then","data","users","userEmail","userPassword","access","checked","localStorage","setItem","sessionStorage","style","display","close","changeElemsOnAuth","navbarUserLinks","isLogged","getItem","triggerSecondForm","inputs","querySelectorAll","submitBtn","setAttribute","forEach","input","removeAttribute","drawTabs","tabs","tabButton","contents","onclick","id","dataset","btn","content","LazyLoad","customSelect","WOW","init","baguetteBox","run","postsContainer","drawPosts","drawSingle","removeItem","postID","setID","containerEl","posts","author","date","drawHTML","setData","lorem","postData","JSON","stringify","DATA","parse","bg","views","parseInt","Math","random","backgroundImage","innerText"],"mappings":"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","file":"../js/main.min.js","sourcesContent":["\"use strict\";\r\n\r\nlet itemsToShow = 12,\r\n    totalItems = 0;\r\n\r\ndocument.body.addEventListener('click', (e) => {\r\n    if (e.target.matches('.collection-btn')) {\r\n        showMore();\r\n        e.target.classList.add('hidden');\r\n    }\r\n})\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\r\n    changeElemsOnAuth();\r\n\r\n    let lazyLoadInstance = new LazyLoad({});\r\n    customSelect('select');\r\n\r\n    userLogin();\r\n    drawNavbar();\r\n\r\n    drawSlider();\r\n    scrollNav();\r\n    new WOW().init();\r\n    baguetteBox.run('.gallery_lookbook', {});\r\n    drawCatalog();\r\n\r\n    const postsContainer = document.querySelector('.blog_posts');\r\n    if (postsContainer != null) {\r\n        drawPosts(postsContainer);\r\n    }\r\n    const singlePostContainer = document.querySelector('.post_main');\r\n    if (singlePostContainer != null) {\r\n        drawSingle();\r\n    }\r\n\r\n    const mapContainer = document.getElementById('map');\r\n    if (mapContainer != null) {\r\n        drawMap();\r\n    }\r\n\r\n    const checkoutContainer = document.querySelector('.checkout');\r\n    if (checkoutContainer != null) {\r\n        triggerSecondForm();\r\n    }\r\n\r\n    const tabsContainer = document.querySelector('.single_tabs');\r\n    if (tabsContainer != null) {\r\n        drawTabs();\r\n    }\r\n\r\n});\r\n\r\nfunction drawSlider() {\r\n    const sliderDefaults = {\r\n        items: 1,\r\n        slideBy: 'page',\r\n        controls: true,\r\n        speed: 1000,\r\n        autoplayButtonOutput: false,\r\n        arrowKeys: true,\r\n        autoplay: true,\r\n        mode: 'gallery'\r\n    };\r\n\r\n    const promoSliderEl = document.querySelector('.promo_slider');\r\n    if (promoSliderEl) {\r\n        const promoSlider = tns({\r\n            container: '.promo_slider',\r\n            controlsContainer: '.promo_slider-controls',\r\n            ...sliderDefaults\r\n        });\r\n    }\r\n\r\n    const locationSliderEl = document.querySelector('.location_slider');\r\n    if (locationSliderEl) {\r\n        const locationSlider = tns({\r\n            container: '.location_slider',\r\n            controlsContainer: '.location_slider-controls',\r\n            ...sliderDefaults\r\n        });\r\n    }\r\n\r\n    const singleSliderEl = document.querySelector('.single_slider');\r\n    if (singleSliderEl) {\r\n        const singleSliderEl = tns({\r\n            container: '.single_slider',\r\n            navContainer: '.single_slider-thumbnails',\r\n            navAsThumbnails: true,\r\n            controlsContainer: '.single_slider-controls',\r\n            ...sliderDefaults,\r\n            autoplay: false\r\n        });\r\n    }\r\n\r\n}\r\n\r\nfunction showMore() {\r\n    let diff = totalItems - itemsToShow;\r\n    itemsToShow += diff;\r\n    console.log(itemsToShow, totalItems);\r\n    drawCatalog();\r\n}\r\n\r\nasync function drawCatalog() {\r\n    let response = await fetch('data/data.json');\r\n    if (response.ok) {\r\n        let json = await response.json();\r\n        let img, html = '',\r\n            item, price, category, color;\r\n        totalItems = json.products.length;\r\n        let liclass = 'products_list-item',\r\n            newclass = `${liclass} wow fadeInUp`;\r\n        const catalogEl = document.querySelector('.products_list'),\r\n            fullCatalogEl = document.querySelector('.catalog_list');\r\n        if (catalogEl != null) {\r\n            if (catalogEl.classList.contains('catalog_list')) {\r\n                itemsToShow = totalItems;\r\n            }\r\n            for (let i = 0; i < itemsToShow; i++) {\r\n                img = json.products[i].img;\r\n                item = json.products[i].itemname;\r\n                price = json.products[i].price;\r\n                category = json.products[i].category;\r\n                color = json.products[i].color;\r\n                if (i > itemsToShow) {\r\n                    liclass = newclass;\r\n                }\r\n                html += drawProdHTML(liclass, img, item, price, category, color);\r\n            }\r\n            catalogEl.innerHTML = html + '<li aria-hidden=\"true\" class=\"hidden\"></li>';\r\n            if (catalogEl.classList.contains('collection_list')) {\r\n                checkDisplay();\r\n            }\r\n            if (fullCatalogEl) {\r\n                const mixer = mixitup('.catalog_list', {\r\n                    animation: {\r\n                        effects: ''\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        console.log(\"HTTP Error: \" + response.status);\r\n    }\r\n}\r\n\r\nfunction drawProdHTML(li, img, item, price, category, color) {\r\n    let html = `\r\n        <li class=\"${li} mix ${category} ${color} col-12 col-sm-6 col-md-4 col-lg-3\" data-price=\"${price}\">\r\n            <picture>\r\n                <source type=\"image/webp\" srcset=\"img/products/${img}.webp\">\r\n                <source type=\"image/jpeg\" srcset=\"img/products/${img}.jpg\">\r\n                <img class=\"${li}_img\" src=\"img/products/${img}.jpg\" alt=\"${item}\">\r\n            </picture>\r\n            <div class=\"${li}_info\">\r\n                <span class=\"name\">${item}</span>\r\n                <span class=\"price\">$${price}</span>\r\n            </div>\r\n            <div class=\"${li}_action d-flex\">\r\n                <a href=\"javasript:void(0)\" class=\"btn-add action-btn\" data-price=\"${price}\">Buy</a>\r\n                <a href=\"product.html\" class=\"btn-info action-btn\" data-id=\"${item}\">Details</a>\r\n            </div>\r\n        </li>\r\n    `;\r\n    return html;\r\n}\r\n\r\nfunction checkDisplay() {\r\n    if (itemsToShow == totalItems) {\r\n        showBtn.classList.add('hidden');\r\n    }\r\n}\r\n\r\n\r\nasync function drawMap() {\r\n    let map = L.map('map', {\r\n        scrollWheelZoom: false,\r\n        fullscreenControl: true,\r\n        fullscreenControlOptions: {\r\n            position: 'topleft'\r\n        }\r\n    }).setView([57.729535, -106.420245], 2);\r\n\r\n    let myFilter = [\r\n        'grayscale:90%',\r\n        'contrast:70%',\r\n        'brightness:110%'\r\n    ];\r\n\r\n    L.tileLayer = L.tileLayer.colorFilter('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        attribution: '',\r\n        filter: myFilter\r\n    }).addTo(map);\r\n\r\n    map.dispMap = function () {\r\n        map.plotMap();\r\n        map.map.invalidateSize();\r\n    };\r\n\r\n    L.control.locate({\r\n        strings: {\r\n            title: \"Your location\"\r\n        },\r\n        icon: \"icon-map-marker\"\r\n    }).addTo(map);\r\n\r\n    let markers = L.markerClusterGroup({\r\n        removeOutsideVisibleBounds: true,\r\n        disableClusteringAtZoom: 16\r\n    });\r\n\r\n\r\n    let response = await fetch('data/data.json');\r\n    if (response.ok) {\r\n        let json = await response.json();\r\n        for (let i = 0; i < json.stores.length; i++) {\r\n            let popupData =\r\n                `<div class=\"popup_general\">\r\n                            <p class=\"popup_general-city\">${json.stores[i].city}</p>\r\n                            <p class=\"popup_general-address\">${json.stores[i].address}</p>\r\n                            <p class=\"popup_general-location\">${json.stores[i].location}</p>\r\n                        </div>\r\n                        <div class=\"popup_additional\">\r\n                            <p class=\"popup_additional-hours\">${json.stores[i].ophours}</p>\r\n                    `;\r\n            if (json.stores[i].phone != null) {\r\n                popupData += `<a href=\"tel:${json.stores[i].phone}\" class=\"popup_additional-phone\"><i class=\"icon-phone\"></i>${json.stores[i].phone}</a>`\r\n            }\r\n            if (json.stores[i].web != null) {\r\n                popupData += `<a href=\"${json.stores[i].web}\" target=\"_blank\" class=\"popup_additional-site\"><i class=\"icon-web\"></i>Website</a>`\r\n            }\r\n            markers.addLayer(L.marker([json.stores[i].lat, json.stores[i].lng])\r\n                .bindPopup(popupData)\r\n            )\r\n        }\r\n        map.addLayer(markers);\r\n    } else {\r\n        console.log(\"HTTP Error: \" + response.status);\r\n    }\r\n}\r\n\r\n\r\nfunction drawNavbar() {\r\n    const nav = document.querySelector('.navbar'),\r\n        navOffset = nav.offsetTop,\r\n        trigger = document.querySelector('.hamburger--minus'),\r\n        submenu = document.querySelector('.navbar_submenu');\r\n\r\n    trigger.addEventListener('click', () => {\r\n        trigger.classList.toggle('is-active');\r\n        submenu.classList.toggle('is-active-nav');\r\n        nav.classList.add('sticky');\r\n    })\r\n\r\n    window.addEventListener('scroll', () => {\r\n        if (window.pageYOffset > navOffset) {\r\n            nav.classList.add('sticky');\r\n        } else if (!submenu.classList.contains('is-active-nav')) {\r\n            nav.classList.remove('sticky');\r\n        }\r\n    })\r\n}\r\n\r\nfunction scrollNav() {\r\n    const scrollTopBtn = document.querySelector('.scroll_top'),\r\n        scrollBottomBtn = document.querySelector('.scroll_bottom');\r\n\r\n    scrollTopBtn.addEventListener('click', () => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: \"smooth\"\r\n        });\r\n    });\r\n\r\n    window.addEventListener('scroll', () => {\r\n        if (window.pageYOffset > 0) {\r\n            scrollBottomBtn.classList.add('active');\r\n        }\r\n        if (window.pageYOffset > 300) {\r\n            scrollTopBtn.classList.add('active');\r\n        } else {\r\n            scrollTopBtn.classList.remove('active');\r\n        }\r\n    });\r\n}\r\n\r\nfunction userLogin() {\r\n    let animate = 'animated fade';\r\n    const swalConfig = {\r\n        title: 'Log in',\r\n        customClass: {\r\n            title: 'popup_login-title',\r\n            popup: 'popup_login'\r\n        },\r\n        showConfirmButton: false,\r\n        showCloseButton: false,\r\n        confirmButtonText: 'Submit',\r\n        showClass: {\r\n            popup: animate + 'In',\r\n            backdrop: animate + 'In swal2-backdrop-show'\r\n        },\r\n        hideClass: {\r\n            popup: animate + 'Out',\r\n            backdrop: animate + 'Out swal2-backdrop-show'\r\n        },\r\n        html: `\r\n                <form method=\"POST\" id=\"popup_login-form\" class=\"popup_login-form\">\r\n                    <input id=\"popup_login-form_email\" type=\"email\" class=\"popup_login-form_email\" placeholder=\"Email\">\r\n                    <input id=\"popup_login-form_password\" type=\"password\" class=\"popup_login-form_password\" placeholder=\"Password\">\r\n                    <p class=\"popup_login-form_error\">Your email/password is incorrect. Check your data and try again.</p>\r\n                    <div class=\"popup_login-form_field\">\r\n                        <input id=\"remember\" type=\"checkbox\" name=\"remember\" checked>\r\n                        <label for=\"remember\">Keep me logged in</label>\r\n                    </div>\r\n                    <button class=\"popup_login-form_submit\">Submit</button>\r\n                </form>\r\n                <a class=\"password_reminder\" href=\"javascript:void(0)\">Forgot your password?</a>\r\n                `};\r\n\r\n    document.body.addEventListener('click', e => {\r\n        if (e.target.matches('.popup_login-form_submit')) {\r\n            e.preventDefault();\r\n            sendLoginRequest();\r\n        }\r\n        if (e.target.matches('.triggerLoginModal')) {\r\n            Swal.fire(swalConfig);\r\n        }\r\n    });\r\n}\r\n\r\nfunction sendLoginRequest() {\r\n    const emailInput = document.getElementById('popup_login-form_email'),\r\n        passwordInput = document.getElementById('popup_login-form_password'),\r\n        checkbox = document.getElementById('remember');\r\n    \r\n    const validationErr = document.querySelector('.popup_login-form_error');\r\n    \r\n    let request = new Promise((resolve, reject) => {\r\n        resolve({\r\n            email: emailInput.value,\r\n            password: passwordInput.value,\r\n            checkbox: checkbox\r\n        });\r\n    }).then(async function (data) {\r\n        let response = await fetch('data/data.json');\r\n        if (response.ok) {\r\n            let json = await response.json();\r\n            for (let i = 0; i < json.users.length; i++) {\r\n                let userEmail = json.users[i].email;\r\n                let userPassword = json.users[i].password;\r\n\r\n                if (userEmail === data.email && userPassword === data.password) {\r\n                    if (json.users[i].access === 'customer') {\r\n                        if (data.checkbox.checked) {\r\n                            localStorage.setItem('auth', 'user');\r\n                        } else {\r\n                            sessionStorage.setItem('auth', 'user');\r\n                        }\r\n                    } else if (json.users[i].access === 'admin') {\r\n                        if (data.checkbox.checked) {\r\n                            localStorage.setItem('auth', 'admin');\r\n                        } else {\r\n                            sessionStorage.setItem('auth', 'admin');\r\n                        }\r\n                    }\r\n                    validationErr.style.display = 'none';\r\n                    Swal.close();\r\n                    changeElemsOnAuth();\r\n                    break;\r\n                } else if (userEmail !== data.email || userPassword !== data.password){\r\n                    validationErr.style.display = 'block';\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\ndocument.body.addEventListener('click', (e) => {\r\n    if (e.target.matches('.logout')) {\r\n        localStorage.removeItem('auth') || sessionStorage.removeItem('auth');\r\n        changeElemsOnAuth();\r\n    }\r\n});\r\n\r\nfunction changeElemsOnAuth() {\r\n    const navbarUserLinks = document.querySelector('.navbar_user-account'),\r\n        navbarDefaultHTML = `\r\n                <a class=\"triggerLoginModal\" id=\"loginlink\" href=\"javascript:void(0)\">Login</a> /\r\n                <a id=\"joinlink\" href=\"join.html\">Join</a>\r\n                `,\r\n        isLogged = localStorage.getItem('auth') || sessionStorage.getItem('auth');\r\n    if (isLogged === 'admin') {\r\n        navbarUserLinks.innerHTML = `\r\n        <a href=\"admin.html\">Orders</a> / \r\n        <a class=\"logout\" href=\"javascript:void(0)\">Logout</a>`;\r\n    } else if (isLogged === 'user') {\r\n        navbarUserLinks.innerHTML = `\r\n        <a href=\"profile.html\">My Account</a> /\r\n        <a class=\"logout\" href=\"javascript:void(0)\">Logout</a>\r\n        `;\r\n    }\r\n    else {\r\n        navbarUserLinks.innerHTML = navbarDefaultHTML;\r\n    }\r\n}\r\n\r\n\r\nfunction triggerSecondForm() {\r\n    const trigger = document.getElementById('isDifferent'),\r\n        inputs = document.querySelectorAll('.checkout_form-fieldset--optional input'),\r\n        submitBtn = document.querySelector('.btn-full-submit');\r\n\r\n    submitBtn.setAttribute('disabled', 'disabled');\r\n\r\n    inputs.forEach(input => {\r\n        input.setAttribute('disabled', 'disabled');\r\n    });\r\n\r\n    trigger.addEventListener('change', () => {\r\n        if (trigger.checked) {\r\n            inputs.forEach(input => {\r\n                input.removeAttribute('disabled');\r\n            });\r\n            submitBtn.removeAttribute('disabled');\r\n\r\n        } else {\r\n            inputs.forEach(input => {\r\n                input.setAttribute('disabled', 'disabled');\r\n            });\r\n            submitBtn.setAttribute('disabled', 'disabled');\r\n        }\r\n    })\r\n}\r\n\r\nfunction drawTabs() {\r\n    const tabs = document.querySelector(\".single_tabs-wrapper\");\r\n    const tabButton = document.querySelectorAll(\".tab-button\");\r\n    const contents = document.querySelectorAll(\".content\");\r\n\r\n    tabs.onclick = e => {\r\n        const id = e.target.dataset.id;\r\n        if (id) {\r\n            tabButton.forEach(btn => {\r\n                btn.classList.remove(\"active\");\r\n            });\r\n            e.target.classList.add(\"active\");\r\n\r\n            contents.forEach(content => {\r\n                content.classList.remove(\"active\");\r\n            });\r\n            const element = document.getElementById(id);\r\n            element.classList.add(\"active\");\r\n        }\r\n    }\r\n}\r\n\r\n// BLOG POSTS--------------------------\r\n\r\nlet postID = 0;\r\n\r\nfunction setID(id) {\r\n    postID = id;\r\n    localStorage.setItem('id', postID);\r\n    drawPosts();\r\n}\r\n\r\n\r\nasync function drawPosts(containerEl) {\r\n    let response = await fetch('data/data.json');\r\n    if (response.ok) {\r\n        let json = await response.json();\r\n        let html = '';\r\n        for (let i = 0; i < json.posts.length; i++) {\r\n            let img = json.posts[i].img,\r\n                title = json.posts[i].title,\r\n                id = json.posts[i].id,\r\n                category = json.posts[i].category,\r\n                author = json.posts[i].author,\r\n                date = json.posts[i].date;\r\n            html += drawHTML(img, title, true, id, category);\r\n            if (id == localStorage.getItem('id')) {\r\n                setData(id, img, title, author, date);\r\n            }\r\n        }\r\n\r\n        containerEl.innerHTML = html;\r\n        const mixer = mixitup(containerEl, {\r\n            animation: {\r\n                effects: ''\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        console.log(\"HTTP Error: \" + response.status);\r\n    }\r\n}\r\n\r\nfunction drawHTML(img, title, lorem, id, category) {\r\n    lorem = `Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam aliquid provident\r\n    quas optio dolor quaerat.`;\r\n    let html = `\r\n    <li class=\"animated fadeInUp blog_posts-post mix ${category} col-12 col-sm-6 col-lg-4 col-xl-3\">\r\n        <div class=\"blog_posts-post_img\">\r\n            <picture>\r\n                <source type=\"image/webp\" srcset=\"img/blog/${img}.webp\">\r\n                <source type=\"image/jpeg\" srcset=\"img/blog/${img}.jpg\">\r\n                <img src=\"img/blog/${img}.jpg\" alt=\"post\">\r\n            </picture>\r\n        </div>\r\n        <div class=\"blog_posts-post_text\">\r\n            <h3 class=\"title\">${title}</h3>\r\n            <p class=\"preview\">${lorem}</p>\r\n            <a href=\"post.html\" class=\"read\" target=\"_blank\" onclick=\"setID(${id})\">Read more</a>\r\n        </div>\r\n    </li>\r\n`;\r\n    return html;\r\n}\r\n\r\n\r\nfunction setData(id, img, title, author, date) {\r\n    if (id = localStorage.getItem('id')) {\r\n        let postData = {\r\n            img: img,\r\n            title: title,\r\n            author: author,\r\n            date: date\r\n        };\r\n        localStorage.setItem('data', JSON.stringify(postData));\r\n    }\r\n}\r\n\r\nfunction drawSingle() {\r\n    let DATA = JSON.parse(localStorage.getItem('data'));\r\n    let bg = `url(img/blog/${DATA.img}-lg.jpg)`, title = DATA.title, author = DATA.author, date = DATA.date;\r\n    let views = parseInt(Math.random() * 10000);\r\n\r\n    document.querySelector('.post_header').style.backgroundImage = bg;\r\n    document.querySelector('.post_info-title').innerText = title;\r\n    document.getElementById('views').innerText = views;\r\n    document.getElementById('author').innerText = author;\r\n    document.getElementById('date').innerText = date;\r\n\r\n}\r\n"]}